---
interface Props {
	src: string;
	timezone?: string;
	height?: string;
	mode?: 'MONTH' | 'WEEK' | 'AGENDA';
	showTitle?: boolean;
	showNav?: boolean;
	showPrint?: boolean;
	showTabs?: boolean;
	showCalendars?: boolean;
}

const {
	src,
	timezone = 'Australia/Melbourne',
	height = '600px',
	mode = 'MONTH',
	showTitle = true,
	showNav = true,
	showPrint = false,
	showTabs = true,
	showCalendars = false,
} = Astro.props;

const params = new URLSearchParams({
	src: src,
	ctz: timezone,
	mode: mode,
	showTitle: showTitle ? '1' : '0',
	showNav: showNav ? '1' : '0',
	showPrint: showPrint ? '1' : '0',
	showTabs: showTabs ? '1' : '0',
	showCalendars: showCalendars ? '1' : '0',
});

const embedUrl = `https://calendar.google.com/calendar/embed?${params.toString()}`;
---

<div class="calendar-container">
	<iframe
		src={embedUrl}
		class="calendar-iframe"
		style={`height: ${height}`}
		frameborder="0"
		scrolling="no"
	></iframe>
</div>

<style>
	.calendar-container {
		margin: 2rem 0;
		border: 1px solid #d1d5db;
		border-radius: 0.5rem;
		overflow: hidden;
		background-color: #ffffff;
	}

	.calendar-iframe {
		width: 100%;
		border: 0;
		display: block;
	}

	@media (max-width: 768px) {
		.calendar-iframe {
			height: 500px !important;
		}
	}
</style>
